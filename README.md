# Booking Hotels

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **Booking Hotels** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π.  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç–µ–ª–∏, —É–∑–Ω–∞–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏, –≤—ã–±–∏—Ä–∞—Ç—å –¥–∞—Ç—ã, –æ—Ñ–æ—Ä–º–ª—è—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–≤–æ–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π.  
–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –±–∞–∑–µ Spring Boot –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å PostgreSQL, MongoDB –∏ Apache Kafka.

## –°—Ç–µ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
![Static Badge](https://img.shields.io/badge/Java-17-blue)
![Static Badge](https://img.shields.io/badge/Spring_Boot-3.1.2-green)
![Static Badge](https://img.shields.io/badge/PostgreSQL-grey)
![Static Badge](https://img.shields.io/badge/MongoDB-grey)
![Static Badge](https://img.shields.io/badge/Kafka-grey)
![Static Badge](https://img.shields.io/badge/Spring_Security-grey)
![Static Badge](https://img.shields.io/badge/MapStruct-grey)
![Static Badge](https://img.shields.io/badge/Lombok-grey)
![Static Badge](https://img.shields.io/badge/Gradle-grey)

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π JDK (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **17**)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **Gradle**
- **PostgreSQL** –∏ **MongoDB**
- **Kafka** (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ–±—ã—Ç–∏–π)
- Git

### –®–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**:
```sh
   git clone https://github.com/DimTiabu/booking-hotels.git
```
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ [application.yml](src/main/resources/application.yml)**
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/hotels_db
    username: your_user
    password: your_password

  data:
    mongodb:
      uri: mongodb://localhost:27017/hotels_db
```
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL –∏ MongoDB –≤ —Ñ–∞–π–ª–µ [docker-compose.yml](/docker/docker-compose.yml).**
```yaml
services:
  postgres:
    environment:
      - POSTGRES_USER=your_user
      - POSTGRES_PASSWORD=your_password
      - POSTGRES_DB=hotels_db
  mongodb:
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: root
      MONGO_INITDB_DATABASE: booking_statistics
```
4. *–ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —Ñ–∞–π–ª–∞ docker-compose:*

```sh
    cd docker
```

5. *–ó–∞–ø—É—Å–∫ docker-compose:*

```sh
    docker-compose up -d
```
‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: MongoDB, PostgreSQL, Kafka
–∏ Zookeeper:

```sh
    docker ps
```
**–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—É–Ω–∫—Ç—É –º–æ–∂–Ω–æ,
–∫–æ–≥–¥–∞ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ Up.**

6. **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:**

```sh
  ./gradlew build
```

7. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

```sh
  ./gradlew bootRun
```
---
## API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080.

–¢–∞–∫ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, 
—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Postman.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
* JWT (JSON Web Token)
* Basic Auth (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–æ—Å—Ç—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤)

üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–æ–ª–∏:
* ROLE_USER ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –ò–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –æ—Ç–µ–ª–µ–π, –Ω–æ–º–µ—Ä–æ–≤ –∏ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
* ROLE_ADMIN ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä. –û–±–ª–∞–¥–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏: –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –æ—Ç–µ–ª–∏, –Ω–æ–º–µ—Ä–∞, —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã


### 1. **HotelController** ‚Äî `/api/hotel`.

| –ú–µ—Ç–æ–¥    | Endpoint                           | –û–ø–∏—Å–∞–Ω–∏–µ                                     | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è     |
|----------| ---------------------------------- | -------------------------------------------- | --------------- |
| GETüîí    | `/api/hotel`                       | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–µ–ª–∏                           | `USER`, `ADMIN` |
| GETüîí    | `/api/hotel/filter?name=Marriott`  | –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–µ–ª–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É (–ø–æ –∏–º–µ–Ω–∏, –≥–æ—Ä–æ–¥—É) | `USER`, `ADMIN` |
| GETüîí    | `/api/hotel/{id}`                  | –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–µ–ª—å –ø–æ ID                         | `USER`, `ADMIN` |
| POSTüîí   | `/api/hotel`                       | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ç–µ–ª—è                        | `ADMIN`         |
| PUTüîí    | `/api/hotel/{id}`                  | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è                             | `ADMIN`         |
| DELETEüîí | `/api/hotel/{id}`                  | –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–µ–ª—è                               | `ADMIN`         |
| POSTüîí| `/api/hotel/rate/{id}?newMark=4.8` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –æ—Ç–µ–ª—è                    | `USER`, `ADMIN` |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (POST /api/hotel):**

```json
{
  "name": "Hotel Astoria",
  "city": "Paris",
  "address": "Champs-√âlys√©es",
  "rating": 4.5
}
```

---

### 2. **RoomController** ‚Äî `/api/room`

| –ú–µ—Ç–æ–¥  | Endpoint                            | –û–ø–∏—Å–∞–Ω–∏–µ                            | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è     |
| ------ | ----------------------------------- | ----------------------------------- | --------------- |
| GETüîí| `/api/room?priceTo=10000&hotelId=1` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ | `USER`, `ADMIN` |
| GETüîí| `/api/room/{id}`                    | –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä –ø–æ ID                | `USER`, `ADMIN` |
| POSTüîí| `/api/room`                         | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–æ–º–µ—Ä–∞              | `ADMIN`         |
| PUTüîí| `/api/room/{id}`                    | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞                   | `ADMIN`         |
| DELETEüîí | `/api/room/{id}`                    | –£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞                     | `ADMIN`         |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (POST /api/room):**

```json
{
  "hotelId": 1,
  "number": "101",
  "type": "STANDARD",
  "price": 9500.0
}
```

---

### 3. **BookingController** ‚Äî `/api/booking`

| –ú–µ—Ç–æ–¥ | Endpoint       | –û–ø–∏—Å–∞–Ω–∏–µ                          | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è     |
| ----- | -------------- | --------------------------------- | --------------- |
| GETüîí| `/api/booking` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π | `ADMIN`         |
| POSTüîí| `/api/booking` | –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ              | `USER`, `ADMIN` |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (POST /api/booking):**

```json
{
  "roomId": 5,
  "checkInDate": "2025-07-01",
  "checkOutDate": "2025-07-05"
}
```

---

### 4. **UserController** ‚Äî `/api/user`

| –ú–µ—Ç–æ–¥ | Endpoint         | –û–ø–∏—Å–∞–Ω–∏–µ                       | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è     |
| ----- | ---------------- | ------------------------------ | --------------- |
| GETüîí| `/api/user`      | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π    | `USER`, `ADMIN` |
| GETüîí| `/api/user/{id}` | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID    | `USER`, `ADMIN` |
| POST  | `/api/user`      | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       | ‚Äî               |
| PUTüîí| `/api/user/{id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `USER`, `ADMIN` |
| DELETEüîí| `/api/user/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è          | `USER`, `ADMIN` |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (POST /api/user):**

```json
{
  "username": "newuser",
  "password": "securePass",
  "email": "newuser@example.com"
}
```

---

### 5. **StatisticsController** ‚Äî `/api/statistics`

| –ú–µ—Ç–æ–¥ | Endpoint                 | –û–ø–∏—Å–∞–Ω–∏–µ                                      | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| ----- | ------------------------ | --------------------------------------------- | ----------- |
| GETüîí| `/api/statistics/export` | –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV | `ADMIN`     |

**–û—Ç–≤–µ—Ç:** –§–∞–π–ª `statistics.csv` –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---
